<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>DeferJsonp-2.0测试</title>
    <script src="DeferJsonp-2.0.js"></script>
</head>
<body>
    <script type="text/javascript">
        var defer = new DeferJsonp,
            url = '/Code/TestService.ashx?callback=?',
            group = function (index, data) {
                console.group(index);
                console.dir(data);
                console.groupEnd();
            };
        //defer.load(url + '&t=4000&data=one', function () {
        //    group(0, arguments);
        //    return arguments;
        //}).load(url + '&t=0&data=two', function () {
        //    group(1, arguments);
        //}).load(url + '&t=2000&data=three', function () {
        //    group(2, arguments);
        //});
        defer.load(url + '&t=4000&data=one', function (data) {
            return data;
        })
        .load(url + '&t=0&data=two', function (data) {
            return data;
        })
        .load(url + '&t=2000&data=three', function (data) {
            return data;
        })
        .load(url + '&t=800&data=three', function () {
            group('result', arguments);
        });

        var defer = new DeferJsonp;
        defer.load(url, done, fail, time)
    </script>
</body>
</html>
